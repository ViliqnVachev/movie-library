<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/common::head">

</head>

<body >
	<header th:replace="fragments/common::navigation"> </header>

	<main>
		<br> <br> <br>
		<h1 class="login border-bottom mb-5">Add a new movie</h1>
		
		<div class="row justify-content-center ">
			<form id="add-movie-form" class="w-50 rounded text-white mt-5" th:object="${addMovieBinding}"
				th:action="@{/movies/add}" th:method="post" enctype="multipart/form-data">

				<div>
					<div class="form-group">
						<label for="inputTitle" class="col-form-label ">Title</label>
					</div>
					<div class="form-group">
						<input th:field="*{title}" name="title" required min="1" type="text" th:errorclass="is-invalid"
							id="inputTitle" class="form-control"
							aria-describedby="inputTitleError"> 
						<small th:if="${#fields.hasErrors('title')}"
							id="inputTitleError" class="invalid-feedback rounded">Title
							length must be more than 1 character</small>
							
						<small
							th:if="${isNotUniqueTitle}" id="titleUniqueError"
							class="custom-invalid-feedback rounded">Movie with this name already exists</small>

					</div>
				</div>
				<br>
				<div>
					<div class="form-group">
						<label for="inputResume" class="col-form-label ">Resume</label>
					</div>
					<div class="form-group">
						<textarea th:field="*{resume}" name="resume" required min="10" id="inputResume" th:errorclass="is-invalid"
							class="form-control" aria-describedby="inputResumeError"></textarea>
						<small th:if="${#fields.hasErrors('resume')}" id="inputResumeError"
							class="invalid-feedback  form-text rounded">Resume
							length must be more than 10 characters</small>
					</div>
				</div>
				<br>
				<div>
					<div class="form-group">
						<label for="inputPicture" class="col-form-label">Movie
							picture</label>
					</div>
					<div class="form-group">
						<input th:field="*{picture}" type="file" name="picture" required id="inputPicture" th:errorclass="is-invalid"
							class="form-control-file" aria-describedby="inputPictureError">
						<small th:if="${#fields.hasErrors('picture')}" id="inputPictureError"
							class="invalid-feedback  form-text rounded">Must
							be valid Picture</small>
					</div>
				</div>
				<br>
				<div>
					<div class="form-group">
						<label class="col-form-label" for="videoUrl">Video Url
							(only last eleven characters from Youtube)</label> 
							<input th:field="*{videoUrl}" name="videoUrl" id="videoUrl" th:errorclass="is-invalid"
							type="text" class="form-control" placeholder="Video url">
							<small th:if="${#fields.hasErrors('videoUrl')}" id="inputPictureError"
							class="invalid-feedback form-text rounded">Must
							be valid URL address</small>
					</div>
				</div>
				<br>
				<div class="form-group row">
					<label for="releaseDate" class="col-sm-2 col-form-label">Release
						date</label>
					<div class="col-sm-10">
						<input th:field="*{releaseDate}"  type="date" class="form-control" id="releaseDate" name="releaseDate"
							th:errorclass="is-invalid" aria-describedby="createdHelpInline">
						<small th:if="${#fields.hasErrors('releaseDate')}" id="createdTimeHelpInline" class="invalid-feedback form-text rounded">
						Created date cannot be empty. </small>
					</div>
				</div>
				<br>
				<div>
					<div class="form-group">
						<label class="p-2" for="categories">Categories:</label> 
						<input th:each="c : ${categories}" th:object="${c}" th:text="${c}" th:value="${c}"
							class="m-3" type="checkbox" name="categories" id="categories"
							value="1" text="Category"> 
							<br>
						<small
							th:if="${isEmpty}" id="titleUniqueError"
							class="custom-invalid-feedback rounded">Category cannot be empty.</small>
					</div>
				</div>

				<div class="d-flex justify-content-center mt-4">
					<button class="btn btn-primary btn-block w-50" type="submit">Add
						Movie</button>
				</div>

			</form>
		</div>
	</main>

	<br>
	<br>
	<br>
	<br>
	<div class="container">
		<div class="row">
<!-- 			<footer th:replace="fragments/common::footer"> </footer> -->
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
		integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
		crossorigin="anonymous"></script>
</body>

</html>