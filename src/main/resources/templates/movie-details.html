<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/common::head">

</head>

<body >
	<header th:replace="fragments/common::navigation"> </header>
	<br>
	<br>
	<br>
	<br>
	<main>
		<div class="container">
			<div class="row justify-content-center">
				<div th:object="${movie}"
					class="col-12 movie card col-sm-12 col-md-12 justify-content-center text-center col-lg-10 m-2 p-0 recent">
					<iframe class="embed-responsive-item"
						th:src="*{videoUrl}"></iframe>
				</div>
			</div>
		</div>
		<br> <br>
		<input type="hidden" name="movieId" id="movieId" th:value="${movie.id}">
		<div class="container">
			<div th:object="${movie}" class="row justify-content-center">
				<div
					class="col-12 movie card col-sm-12 col-md-12 justify-content-center text-center col-lg-10 m-2 p-0 recent">
					<section class="resume text-center">
						<h4 th:text="| Title: *{title}|">Title:</h4>
						<p id="resume">Resume:</p>
						<p th:text="*{resume}">Lorem, ipsum dolor sit amet consectetur adipisicing elit.
							Recusandae eveniet ducimus eligendi praesentium vero non ea!
							Corporis exercitationem provident eveniet ut molestias
							dignissimos nobis eius vero, facere dolorum reprehenderit atque.
							Lorem ipsum dolor sit amet consectetur, adipisicing elit. Eum
							corporis quasi ex dolor doloremque, autem nam, fugiat, quos
							quaerat quia ipsa perspiciatis nemo vero recusandae temporibus
							minus deserunt unde eveniet?</p>
						<div class="likes likes-btn-wrapper">
						<th:block th:if="*{canVote}">
						<form th:method="post" th:action="@{/movies/like/{id}(id=*{id})}">
							<button class="button" type="submit">Like</button>
							
						</form>
						<form th:method="post" th:action="@{/movies/dislike/{id}(id=*{id})}">
							<button class="button" type="submit">Dislike</button>
						</form>
						</th:block>
						<img
								class="hearts" src="/images/heart.png"> 
						   <span
								id="total-likes" th:text="|Raiting: *{raiting} |"></span>
						</div>
					</section>
				</div>
			</div>
		</div>
		<br> <br>
		<div class="container">
			<div class="row justify-content-center">
				<div
					class="col-12 movie card col-sm-12 col-md-12 justify-content-center text-center col-lg-10 m-2 p-0 recent">
					<section class="resume">
						<h1>Comments</h1>

						<div>
							<form id="addComment" method="POST" >
								<div>
									<h4>Leave a comment</h4>
									<label for="message">Message</label>
									<textarea name="message" id="message" cols="30" rows="5"
										class="form-control" style="background-color: white;"></textarea>
									<small id="messageError" class="invalid-feedback">
										Message should be at least 10 characters. </small>
								</div>
								<br>
								<div>
								<input type="submit" class="btn btn-primary btn-block w-50"
										id="postComment" value="Post Comment" />
								</div>
							</form>
						</div>

						<div>

							<span id="commentCtnr"> <!-- Comments section, filled in by script -->
							</span>
						</div>
					</section>
				</div>
			</div>
		</div>

	</main>

	<br>
	<br>
	<br>
	<br>
	<script th:src="@{/js/comments.js}"></script>
	<div class="container">
		<div class="row">
<!-- 			<footer th:replace="fragments/common::footer"> </footer> -->
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
		integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
		crossorigin="anonymous"></script>
</body>

</html>